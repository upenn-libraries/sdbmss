<% if current_user %>
  <div class="panel panel-default" id="my_bookmarks">
      <ul class="nav nav-tabs">
        <li ng-repeat="(name, bookmarks) in all_bookmarks" class="bookmark-nav-button" ng-class="{active: (name == active) }">
          <a data-toggle='tab' href='#bookmark-tab-{{ name }}' ng-click="addTabToStorage(name);">{{ name }}
          <span class="badge">{{ bookmarks.length }}</span></a>
        </li>
      </ul>
    <div class="tab-content bookmark-panes">

      <div ng-repeat="(name, bookmarks) in all_bookmarks" class="tab-pane fade" id="bookmark-tab-{{ name }}" ng-class="{active: (name == active), in: (name == active)}">
        <ul class="list-group bookmarks">
          <li class="list-group-item" ng-if="bookmarks.length <= 0">
            No records of this type have been bookmarked yet.
          </li>
          <li class="list-group-item" ng-repeat="bookmark in bookmarks">
              <dl class="document-show-heading dl-invert" style="padding-left: 10px;">
                  <dt class='h4'>
                    <strong><a href="{{ bookmark.link }}"> {{ bookmark.public_id }}</a></strong>
                    <span ng-bind-html="actionButton(bookmark)"></span> 
                    <a class='remove-bookmark control-bookmark pull-right' ng-click="removeBookmark(name, bookmark)">
                      <span class="glyphicon glyphicon-trash"></span>
                    </a>
                    <a class="tag-bookmark pull-right" ng-click="bookmark.showAddTag = !bookmark.showAddTag"><span class="glyphicon glyphicon-tag"></span></a>
                  </dt>
                  <dd>
                    <div class="form-inline">
                      <div class="input-group add-bookmark-tag" ng-show="bookmark.showAddTag">
                        <input type='text' class='form-control' placeholder="add tag..." ng-model="bookmark.newtag" ng-keyup="$event.keyCode == 13 && addtag(bookmark, bookmark.newtag)">
                        <a class="input-group-addon add-bookmark-tag-confirm" ng-click="addtag(bookmark, bookmark.newtag)"><span class="glyphicon glyphicon-plus"></span></a>
                      </div>
                    </div> 
                  </dd>
              </dl>
              <div ng-bind-html="bookmark.details"></div>
              <dl class="document-metadata dl-invert dl-horizontal">
                <dt>Tags</dt>
                <dd ng-if="bookmark.tags.length > 0">
                  <ul class="list-inline">
                    <li ng-repeat="tag in bookmark.tags" class="bookmark-tag bg-primary">
                        <a href="/bookmarks?tag={{ tag }}">{{ tag }}</a> <!-- fix me: should this filter in bookmark panel, or go to manage bookmarks search? -->
                        <a class='remove-bookmark-tag-confirm small' ng-click="removetag(bookmark, tag)"><span class="glyphicon glyphicon-remove"></span></a>
                    </li>
                  </ul>
                </dd>
                <dd ng-if="bookmark.tags.length <= 0" class='text-warning'>This bookmark has no tags - add some!</dd>
              </dl>
          </li>
        </ul>
      </div>
  
    </div>
    <div class="form-inline clearfix navbar-form">
      <label for="" class="control-label">Filter By Tag:  
        <input type="text" class="form-control" name="tag-search" size=12 ng-model="tagSearch" ng-keyup="$event.keyCode == 13 && searchTag(tagSearch)">
      </label>
      <a href='/bookmarks' class="pull-right text-right">Manage<br>Bookmarks</a>
    </div>
  </div>
<% end %>