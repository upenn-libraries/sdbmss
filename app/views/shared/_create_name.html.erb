<script type="text/ng-template" id="createName.html">
    <div class="modal-header">
        <h3 class="modal-title">Create {{ entityName }}</h3>
    </div>
    <div class="modal-body form-horizontal compress-whitespace">
        
        <div class="form-group row">
            <label class="col-sm-2 control-label">Name</label>
            <div class="col-sm-5">
                <input type="text" class="form-control" ng-model="entity.name">
            </div>
            <div class="col-sm-3">
                <button ng-click="find_suggestions(entity.name)" ng-disabled="loading" class="btn btn-primary">Find suggestions</button>
            </div>
            <div class="col-sm-1">
                <img id="spinner" alt="working..." src="<%= asset_path "spinner.gif" %>" ng-show="loading"/>
            </div>
        </div>

        <div class="form-group row" ng-show="hasViafId">
            <label class="col-sm-2 control-label">VIAF ID</label>
            <div class="col-sm-2">
                <input type="text" class="form-control" ng-model="entity.viaf_id">
            </div>
        </div>

        <div class="form-group row" ng-show="hasViafId">
            <label class="col-sm-2 control-label">Comment</label>
            <div class="col-sm-7">
                <input type="text" class="form-control" ng-model="entity.comment">
            </div>
        </div>

        
        <div ng-show="showSuggestions">
            <table ng-show="suggestions.length > 0" class="table table-striped table-suggestions">
                <thead>
                    <tr>
                        <th class="col-sm-6"><b>Name</b></th>
                        <th class="col-sm-2"><b>VIAF ID</b></th>
                        <th class="col-sm-2"></th>
                    </tr>
                </thead>
                <tbody>
                    <tr data-ng-repeat="suggestion in suggestions">
                        <td class="col-sm-6">{{ suggestion.name }}</td>
                        <td class="col-sm-2"><a target="_blank" href="http://viaf.org/viaf/{{ suggestion.viaf_id }}/">{{ suggestion.viaf_id }}</a></td>
                        <td class="col-sm-2"><a ng-click="use_suggestion(suggestion)" href="#">Use this info</a></td>
                    </tr>
                </tbody>
            </table>
            <div ng-show="!loading && suggestions.length == 0">No suggestions found.</div>
        </div>

        <p ng-show="message">{{ message }}</p>

        <p ng-show="saveError">Error saving this name: {{ saveError }}</p>
        
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" ng-click="save()" ng-show="readyToCreate">Create</button>
        <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
    </div>
</script>
